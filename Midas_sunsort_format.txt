Notes on the data format of the MIDAS system 


*MIDAS - The Multiple Instance Data Acquisition System*

* *

* Tape Server - data block format *

*The tape server writes a 24 byte control block at the beginning of each
data block.
This control block contains an identification of the type of data
following and also fields which allow the hardware architecture of the
data source to be determined. This is important since the data may not
be written by a processor having the same architecture as the data
source. As an extreme case consider a data tape being read by a Sun
Sparc processor which has been written by a Intel Linux system
containing data from a VME based source. *

* *


*//    24 byte data block header

typedef struct s_data_header {
    char   header_id[8];              //   contains the string  EBYEDATA
    long   header_sequence;           //   within the file
    short  header_stream;             //   data acquisition stream number (in the range 1=>4)
    short  header_tape;               //   =1
    short  header_MyEndian;           //   written as a native 1 by the tape server
    short  header_DataEndian;         //   written as a native 1 in the hardware structure of the data following
    long   header_dataLen;            //   total length of useful data following the header in bytes
} DATA_HEADER;

*

*back to documentation index <base.html> *
========================================================================

read to the next word which has 0xffff as content when anded with 0xffff

Header
=====
byte - high byte of the number of events
byte - nbytes -low bytes of the number of bytes in event including header


loop until finished with nbytes

Data
----
4 bytes
=======
byte ==> adc   
byte ==> bin_slot
byte ==> adc_content(low) 
byte ==> adc_content(highs)

value_adc = {256*adc_content(high)+adc_content(low)} &0x0fff
adc_num = 32*(bin_slot -1) + adc


read to the next word which has 0xffff as content when anded with 0xffff


=============================================================================

DATA AQuisition system consits of a VMECRATE with 32 slots with
each slot having 32 ADC's.  Each ADC has 4096 conversion gain.

There are a total possible 1024 ADC's available.  Not all adcs are
present in an experiment.


